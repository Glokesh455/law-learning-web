<div class="container-wrapper">
  <div class="container1" *ngIf="showContainer1">
    <form (ngSubmit)="sendOTP()" #otpForm="ngForm">
      <h2>Forgot Phone Number</h2>
      <mat-form-field class="mat-form-field-wrapper" appearance="outline">
        <mat-label>Enter your Email Id</mat-label>
        <input matInput type="email" [(ngModel)]="email" name="email" required
               pattern="[a-z0-9._%+-]+@[a-z.-]+\.[a-z]{2,3}" #emailInput="ngModel">
        <mat-error *ngIf="emailInput.invalid && (emailInput.dirty || emailInput.touched)"
                   class="error-message">
          Invalid email address
        </mat-error>
      </mat-form-field>
      <div class="button-container">
        <button mat-raised-button color="primary" type="submit" *ngIf="!detailsEntered"
          [disabled]="otpForm.invalid ">
          Send OTP
        </button>
      </div>
    </form>

    <form *ngIf="detailsEntered" (ngSubmit)="verifyOTP()" #verifyForm="ngForm">
      <h2>Enter Email OTP</h2>
      <mat-form-field class="mat-form-field-wrapper" appearance="outline">
        <mat-label>Enter Email OTP</mat-label>
        <input matInput type="number" [(ngModel)]="emailOTPInput" name="emailOTPInput" required pattern="[0-9]{6}"
          maxlength="6">
      </mat-form-field>
      <div class="button-container" *ngIf="showVerifyButton">
        <button mat-raised-button color="primary" type="submit" *ngIf="!updatePhoneMode || !detailsEntered"
          [disabled]="verifyForm.invalid || otpVerified">
          Verify OTP
        </button>
      </div>
    </form>
  </div>

  <div class="container2 verify-otp" *ngIf="showContainer2">
    <form *ngIf="otpVerified " (ngSubmit)="updatePhoneNumber()" #updatePhoneForm="ngForm">
      <h2>Update Phone Number</h2>
      <mat-form-field appearance="outline">
        <mat-label>Enter New Phone Number</mat-label>
        <input matInput type="tel" [(ngModel)]="phone" name="phone" required pattern="[0-9]{10}" maxlength="10">
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Confirm New Phone Number</mat-label>
        <input matInput type="tel" [(ngModel)]="confirmPhone" name="confirmPhone" required pattern="[0-9]{10}"
          maxlength="10">
      </mat-form-field>

      <div class="button-container">
        <button mat-raised-button color="primary" type="submit" *ngIf="!updatePhoneMode"
          [disabled]="updatePhoneForm.invalid || (phone !== confirmPhone)">
          Send OTP
        </button>
      </div>
    </form>

    <form *ngIf="updatePhoneMode" (ngSubmit)="updatePhoneNumber()" #updatePhoneForm="ngForm">
      <h2>OTP Verification</h2>
      <mat-form-field class="mat-form-field-wrapper" appearance="outline">
        <mat-label>Enter Phone OTP</mat-label>
        <input matInput type="number" [(ngModel)]="phoneOTPInput" name="phoneOTPInput" required pattern="[0-9]{6}"
          maxlength="6">
      </mat-form-field>
      <div class="button-container">
        <button mat-raised-button color="primary" type="submit" routerLink="/login"
          [disabled]="updatePhoneForm.invalid" >
          Update Phone Number
        </button>
      </div>
    </form>
  </div>
</div>

