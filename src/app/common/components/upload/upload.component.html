<div class="main-container">
  <div class="container-wrapper">
    <div class="form-container">

      <div class="form-group">
        <h2>Upload Sections with Multiple Video:</h2>

        <div *ngFor="let mainSection of mainSections; let mainIndex = index" class="main-section">
          <div class="section-number">Section {{mainIndex + 1}}</div>
          <button type="button" class="remove-button" (click)="removeMainSection(mainIndex)">×</button>
          <br />
          <div class="form-group">
            <label for="mainName{{mainIndex}}">Section Title: </label>
            <input type="text" id="mainName{{mainIndex}}" [(ngModel)]="mainSection.name" name="mainSectionNames[]"
              required>
          </div>

          <div class="form-group">
            <label for="description">Description:</label>
            <textarea id="description" [(ngModel)]="mainSection.description" name="description" rows="4" required></textarea>
          </div>





          <div *ngFor="let subSection of mainSection.subSections; let subIndex = index">
            <div class="sub-section">
              <div class="form-group">
                <label for="subName{{mainIndex}}_{{subIndex}}">Sub-Section Title: </label>
                <input type="text" id="subName{{mainIndex}}_{{subIndex}}" [(ngModel)]="subSection.title"
                  name="subSectionNames[]" required>
              </div>

              <button type="button" class="remove-button" (click)="removeSubSection(mainIndex, subIndex)">×</button>
              <br />

              <div class="form-group">
                <label for="subDescription{{mainIndex}}_{{subIndex}}">Description:</label>
                <textarea id="subDescription{{mainIndex}}_{{subIndex}}" [(ngModel)]="subSection.description" name="description" rows="4" required></textarea>
              </div>

             

              <div class="form-group">
                <label for="mainFile{{subIndex}}">Upload Video: </label>
                <input type="file" id="mainFile{{subIndex}}" (change)="onMainFileSelected($event, subIndex)"
                  accept="video/*">

                  
              </div>

              <video #videoElement style="display: none;"></video>

              <div class="form-group">
                <label>Video Duration:</label>
                <div class="duration-input">
                  <!-- <input type="number" min="0" max="60"  id="minutes" name="minutes" placeholder="Minutes" required> -->
                  <!-- <input type="number" min="1" max="60"  id="sec" name="seconds"  placeholder="Seconds" required> -->
                
                  <!-- <input type="number" min="0" max="60" [(ngModel)]="mainSections[mainIndex].duration.minutes" id="minutes" name="minutes" placeholder="Minutes" required> -->
                 <!-- <input type="number" min="1" max="60" [(ngModel)]="mainSections[mainIndex].duration.seconds" id="sec" name="seconds"  placeholder="Seconds" required> -->
                 <input type="number" min="0" max="60" [(ngModel)]="mainSections[mainIndex].duration.minutes"
                 id="minutes" name="minutes" placeholder="Minutes" required [disabled]="isDurationFetched">
               <input type="number" min="1" max="60" [(ngModel)]="mainSections[mainIndex].duration.seconds"
                 id="sec" name="seconds" placeholder="Seconds" required [disabled]="isDurationFetched">
               
                
                </div>
              </div>

              <div class="form-group">
                <label for="subFile{{mainIndex}}_{{subIndex}}">Upload Documents: </label>
                <input type="file" id="subFile{{mainIndex}}_{{subIndex}}"
                  (change)="onSubFileSelected($event, mainIndex, subIndex)" accept="video/*">
              </div>

              <div *ngIf="!subSection.submitted">
                <button type="button" class="save-button sec-save-button " (click)="saveSubSection(mainIndex, subIndex)">Save</button>
                <p class="button-description">By clicking save all your files related to this subsection will be saved.</p>
                <button type="button" class="submit-button" (click)="submitSubSection(mainIndex, subIndex)">Submit</button>
              <p class="button-description">By clicking submit all your files related to this subsection will be submitted to the website for review.</p>
              </div>
              <div *ngIf="subSection.submitted && subSection.status === 'Under Review'">
                <span>Status: {{subSection.status}}</span>
              </div>
            </div>
          </div>


          <div *ngIf="!mainSection.submitted">
            <button type="button" class="save-button custom-save-button" (click)="saveMainSection(mainIndex)">Save</button>
            <p class="button-description">By clicking save all your files related to this section will be saved.</p>
            <button type="button" class="sec-submit-button" (click)="submitMainSection(mainIndex)">Submit</button>
            <p class="button-description">By clicking submit all your files related to this section will be submitted to the website for review.</p>
          </div>
          <div *ngIf="mainSection.submitted && mainSection.status === 'Under Review'">
            <span>Status: {{mainSection.status}}</span>
          </div>


          <br />
          <button type="button" class="add-subsection-button" (click)="addSubSection(mainIndex)">+</button>
        </div>
        <br />
        <button type="button" class="add-section-button" (click)="addMainSection()">+</button>
      </div>

      <div>
        <button type="button" class="submit-button" (click)="submitSections()">Submit All</button>
      </div>
    </div>
  </div>
  <br/>
<br/>
<br/>
</div>

